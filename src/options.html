<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Container Traffic Control Options</title>
    <link rel="stylesheet" href="options.css">
</head>
<body>
    <div class="container">
        <h1>Container Traffic Control</h1>
        <p>Define rules to control which container websites open in.</p>

        <div class="rules-section">
            <h2>Rules</h2>
            <div class="validation-messages" id="validationMessages"></div>

            <div class="button-group">
                <button id="addRuleBtn" class="btn btn-secondary">Add Rule</button>
                <button id="saveRulesBtn" class="btn btn-primary">Save Rules</button>
            </div>

            <table id="rulesTable" class="rules-table">
                <thead>
                    <tr>
                        <th class="type-column">Type</th>
                        <th>Container</th>
                        <th>URL Pattern</th>
                        <th>High Priority</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="rulesTableBody">
                </tbody>
            </table>
        </div>

        <div class="help-section">
            <h2>Help</h2>

            <h4>Type</h4>
            <div class="rule-legend">
                <p><strong>üåê Open Container:</strong> Container accepts these URLs plus any others. Use for containers that should handle specific sites but remain open for general browsing.</p>
                <p><strong>üîí Restricted Container:</strong> Container ONLY accepts specified URLs. Navigating to non-matching URLs will boot you out of the container. Use for strict isolation (e.g., work-only sites).</p>
                <p><strong>‚ö†Ô∏è Important:</strong> A container cannot mix "Open" and "Restricted" rules.</p>
            </div>

            <h4>Container</h4>
            <div class="rule-legend">
                <p>Firefox container the rule applies to. "No Container" means default browsing without container isolation.</p>
                <p>See <a href="https://addons.mozilla.org/en-US/firefox/addon/multi-account-containers/" target="_blank">Multi-Account Containers</a> for creating and managing containers.</p>
            </div>

            <h4>URL Pattern</h4>
            <div class="rule-legend">
                <p><strong>Simple patterns:</strong> Type the domain or URL part directly</p>
                <ul>
                    <li><code>github.com</code> ‚Üí matches any URL containing "github.com"</li>
                    <li><code>mail.google.com</code> ‚Üí matches Gmail URLs</li>
                    <li><code>work.example.com</code> ‚Üí matches work site URLs</li>
                </ul>
                <p><strong>Regex patterns:</strong> Wrap in slashes for advanced matching</p>
                <ul>
                    <li><code>/.*\.google\.com/</code> ‚Üí matches any Google subdomain</li>
                    <li><code>/^https://github\.com/user/</code> ‚Üí matches specific user's repos</li>
                    <li><code>/\.(work|company)\.com$/</code> ‚Üí matches multiple work domains</li>
                </ul>
            </div>

            <h4>High Priority</h4>
            <div class="rule-legend">
                <p>When multiple containers match a URL (and you're about to move to a new container), high-priority rules are chosen first. Use to override default container assignments.</p>
                <p><strong>Example:</strong> Both "Personal" and "Work" containers match <code>github.com</code>, but "Work" has high priority ‚Üí opens in Work container.</p>
            </div>

            <h3>How Container Traffic Control Works</h3>
            <ol>
                <li><strong>Stay Put:</strong> If your current container accepts the URL, you stay there</li>
                <li><strong>Restricted Containers:</strong> If you're in a container with "Allow Only" rules and click a non-matching link, you'll be moved out</li>
                <li><strong>Finding a Match:</strong> When switching containers, high-priority rules win, then first matching rule</li>
                <li><strong>Default:</strong> If no rules match, opens in "No Container" (regular browsing)</li>
            </ol>
        </div>
    </div>

    <script src="utils.js"></script>
    <script src="ctc-repository.js"></script>
    <script src="options.js"></script>
</body>
</html>